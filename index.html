<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 趋势分析引擎</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div class="app-container">
        <header>
            <div class="header-content">
                <div class="site-logo">
                    <img src="assets/logo.png" alt="Logo" class="logo-image">
                    <span class="site-title">AI 趋势分析引擎</span>
                </div>
                <div class="header-controls">
                    <a href="search.html" class="icon-button" title="搜索 (Search)">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>
                    </a>
                    <a href="settings.html" class="icon-button" title="设置 (Settings)">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"></path></svg>
                    </a>
                </div>
            </div>
        </header>

        <main>
            <div id="category-tabs-container" class="tabs-container" style="text-align: center; margin-bottom: 24px; border-bottom: 1px solid var(--border-color); padding-bottom: 16px;">
                </div>

            <div class="report-header">
                <h1 id="report-title">热点简报</h1> <div class="date-picker-container">
                    <label for="report-date-picker">报告日期:</label>
                    <input type="date" id="report-date-picker">
                </div>
            </div>
            <div class="report-header">
                <h1>今日热点简报</h1>
                <p id="report-date">正在加载最新报告...</p>
            </div>

            <div id="loading-spinner" class="loading-container" style="display: block;">
                <div class="loading-spinner"></div>
                <p>正在连接数据库并获取 AI 分析...</p>
            </div>

            <div id="error-message" class="error-container" style="display: none;"></div>

            <div class="treemap-section">
                <h2>今日热点话题分布</h2>
                <div id="treemap-container"></div>
            </div>

            <div class="report-section">
                <h2>市场宏观分析</h2>
                <div id="report-summary" class="report-card"></div>
            </div>
        </main>

        <footer>
            <div class="footer-content">
                <p>&copy; 2025 AI 趋势分析引擎。内容由 AI 生成，仅供参考，不构成投资建议。</p>
            </div>
        </footer>
        <div id="drilldown-modal" class="modal-overlay">
            <div class="modal-content">
                <button id="modal-close-btn" class="modal-close-btn">&times;</button>
                <div id="modal-body" class="modal-body">
                    </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script type="module" src="js/supabase_client.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>